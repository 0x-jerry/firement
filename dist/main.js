!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("firebase")):"function"==typeof define&&define.amd?define(["firebase"],t):(e=e||self).Firement=t(e.firebase)}(this,(function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t,n,s,r,i,l,o={},a=[],u=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function c(e,t){for(var n in t)e[n]=t[n];return e}function h(e){var t=e.parentNode;t&&t.removeChild(e)}function p(e,t,n){var s,r=arguments,i={};for(s in t)"key"!==s&&"ref"!==s&&(i[s]=t[s]);if(arguments.length>3)for(n=[n],s=3;s<arguments.length;s++)n.push(r[s]);if(null!=n&&(i.children=n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===i[s]&&(i[s]=e.defaultProps[s]);return f(e,i,t&&t.key,t&&t.ref)}function f(e,n,s,r){var i={type:e,props:n,key:s,ref:r,__k:null,__:null,__b:0,__e:null,__d:null,__c:null,constructor:void 0};return t.vnode&&t.vnode(i),i}function g(e){return e.children}function d(e,t){this.props=e,this.context=t}function _(e,t){if(null==t)return e.__?_(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?_(e):null}function m(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return m(e)}}function k(e){(!e.__d&&(e.__d=!0)&&1===n.push(e)||r!==t.debounceRendering)&&((r=t.debounceRendering)||s)(b)}function b(){var e,t,s,r,i,l,o;for(n.sort((function(e,t){return t.__v.__b-e.__v.__b}));e=n.pop();)e.__d&&(s=void 0,r=void 0,l=(i=(t=e).__v).__e,(o=t.__P)&&(s=[],r=$(o,i,c({},i),t.__n,void 0!==o.ownerSVGElement,null,s,null==l?_(i):l),A(s,i),r!=l&&m(i)))}function x(e,t,n,s,r,i,l,u,c){var p,f,g,d,m,k,b,x=n&&n.__k||a,v=x.length;if(u==o&&(u=null!=i?i[0]:v?_(n,0):null),p=0,t.__k=y(t.__k,(function(n){if(null!=n){if(n.__=t,n.__b=t.__b+1,null===(g=x[p])||g&&n.key==g.key&&n.type===g.type)x[p]=void 0;else for(f=0;f<v;f++){if((g=x[f])&&n.key==g.key&&n.type===g.type){x[f]=void 0;break}g=null}if(d=$(e,n,g=g||o,s,r,i,l,u,c),(f=n.ref)&&g.ref!=f&&(b||(b=[]),g.ref&&b.push(g.ref,null,n),b.push(f,n.__c||d,n)),null!=d){if(null==k&&(k=d),null!=n.__d)d=n.__d,n.__d=null;else if(i==g||d!=u||null==d.parentNode){e:if(null==u||u.parentNode!==e)e.appendChild(d);else{for(m=u,f=0;(m=m.nextSibling)&&f<v;f+=2)if(m==d)break e;e.insertBefore(d,u)}"option"==t.type&&(e.value="")}u=d.nextSibling,"function"==typeof t.type&&(t.__d=d)}}return p++,n})),t.__e=k,null!=i&&"function"!=typeof t.type)for(p=i.length;p--;)null!=i[p]&&h(i[p]);for(p=v;p--;)null!=x[p]&&L(x[p],x[p]);if(b)for(p=0;p<b.length;p++)z(b[p],b[++p],b[++p])}function y(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var s=0;s<e.length;s++)y(e[s],t,n);else n.push(t?t("string"==typeof e||"number"==typeof e?f(null,e,null,null):null!=e.__e||null!=e.__c?f(e.type,e.props,e.key,null):e):e);return n}function v(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===u.test(t)?n+"px":null==n?"":n}function w(e,t,n,s,r){var i,l,o,a,u;if(r?"className"===t&&(t="class"):"class"===t&&(t="className"),"key"===t||"children"===t);else if("style"===t)if(i=e.style,"string"==typeof n)i.cssText=n;else{if("string"==typeof s&&(i.cssText="",s=null),s)for(l in s)n&&l in n||v(i,l,"");if(n)for(o in n)s&&n[o]===s[o]||v(i,o,n[o])}else"o"===t[0]&&"n"===t[1]?(a=t!==(t=t.replace(/Capture$/,"")),u=t.toLowerCase(),t=(u in e?u:t).slice(2),n?(s||e.addEventListener(t,S,a),(e.l||(e.l={}))[t]=n):e.removeEventListener(t,S,a)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&!r&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n?e.removeAttribute(t):e.setAttribute(t,n))}function S(e){this.l[e.type](t.event?t.event(e):e)}function $(e,n,s,r,i,l,o,a,u){var h,p,f,_,m,k,b,v,w,S,$=n.type;if(void 0!==n.constructor)return null;(h=t.__b)&&h(n);try{e:if("function"==typeof $){if(v=n.props,w=(h=$.contextType)&&r[h.__c],S=h?w?w.props.value:h.__:r,s.__c?b=(p=n.__c=s.__c).__=p.__E:("prototype"in $&&$.prototype.render?n.__c=p=new $(v,S):(n.__c=p=new d(v,S),p.constructor=$,p.render=P),w&&w.sub(p),p.props=v,p.state||(p.state={}),p.context=S,p.__n=r,f=p.__d=!0,p.__h=[]),null==p.__s&&(p.__s=p.state),null!=$.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=c({},p.__s)),c(p.__s,$.getDerivedStateFromProps(v,p.__s))),_=p.props,m=p.state,f)null==$.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==$.getDerivedStateFromProps&&v!==_&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(v,S),!p.__e&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(v,p.__s,S)){for(p.props=v,p.state=p.__s,p.__d=!1,p.__v=n,n.__e=s.__e,n.__k=s.__k,p.__h.length&&o.push(p),h=0;h<n.__k.length;h++)n.__k[h]&&(n.__k[h].__=n);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(v,p.__s,S),null!=p.componentDidUpdate&&p.__h.push((function(){p.componentDidUpdate(_,m,k)}))}p.context=S,p.props=v,p.state=p.__s,(h=t.__r)&&h(n),p.__d=!1,p.__v=n,p.__P=e,h=p.render(p.props,p.state,p.context),n.__k=y(null!=h&&h.type==g&&null==h.key?h.props.children:h),null!=p.getChildContext&&(r=c(c({},r),p.getChildContext())),f||null==p.getSnapshotBeforeUpdate||(k=p.getSnapshotBeforeUpdate(_,m)),x(e,n,s,r,i,l,o,a,u),p.base=n.__e,p.__h.length&&o.push(p),b&&(p.__E=p.__=null),p.__e=null}else n.__e=C(s.__e,n,s,r,i,l,o,u);(h=t.diffed)&&h(n)}catch(e){t.__e(e,n,s)}return n.__e}function A(e,n){t.__c&&t.__c(n,e),e.some((function(n){try{e=n.__h,n.__h=[],e.some((function(e){e.call(n)}))}catch(e){t.__e(e,n.__v)}}))}function C(e,t,n,s,r,i,l,u){var c,h,p,f,g,d=n.props,_=t.props;if(r="svg"===t.type||r,null==e&&null!=i)for(c=0;c<i.length;c++)if(null!=(h=i[c])&&(null===t.type?3===h.nodeType:h.localName===t.type)){e=h,i[c]=null;break}if(null==e){if(null===t.type)return document.createTextNode(_);e=r?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type),i=null}if(null===t.type)null!=i&&(i[i.indexOf(e)]=null),d!==_&&(e.data=_);else if(t!==n){if(null!=i&&(i=a.slice.call(e.childNodes)),p=(d=n.props||o).dangerouslySetInnerHTML,f=_.dangerouslySetInnerHTML,!u){if(d===o)for(d={},g=0;g<e.attributes.length;g++)d[e.attributes[g].name]=e.attributes[g].value;(f||p)&&(f&&p&&f.__html==p.__html||(e.innerHTML=f&&f.__html||""))}(function(e,t,n,s,r){var i;for(i in n)i in t||w(e,i,null,n[i],s);for(i in t)r&&"function"!=typeof t[i]||"value"===i||"checked"===i||n[i]===t[i]||w(e,i,t[i],n[i],s)})(e,_,d,r,u),t.__k=t.props.children,f||x(e,t,n,s,"foreignObject"!==t.type&&r,i,l,o,u),u||("value"in _&&void 0!==_.value&&_.value!==e.value&&(e.value=null==_.value?"":_.value),"checked"in _&&void 0!==_.checked&&_.checked!==e.checked&&(e.checked=_.checked))}return e}function z(e,n,s){try{"function"==typeof e?e(n):e.current=n}catch(e){t.__e(e,s)}}function L(e,n,s){var r,i,l;if(t.unmount&&t.unmount(e),(r=e.ref)&&z(r,null,n),s||"function"==typeof e.type||(s=null!=(i=e.__e)),e.__e=e.__d=null,null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){t.__e(e,n)}r.base=r.__P=null}if(r=e.__k)for(l=0;l<r.length;l++)r[l]&&L(r[l],n,s);null!=i&&h(i)}function P(e,t,n){return this.constructor(e,n)}async function R(t,n,s){if(!s)throw new Error("please login");const r=(await e.database().ref(`/${t}/${n}`).once("value")).val();if(r.likes=r.likes||{},r.likes[s])throw new Error("liked");return r.likes[s]=!0,async function(t,n,s){const r=Object.keys(s);for await(const i of r)e.database().ref(`/${t}/${n}/${i}`).set(s[i])}(t,n,{likes:r.likes})}t={__e:function(e,t){for(var n;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError)n.setState(n.constructor.getDerivedStateFromError(e));else{if(null==n.componentDidCatch)continue;n.componentDidCatch(e)}return k(n.__E=n)}catch(t){e=t}throw e}},d.prototype.setState=function(e,t){var n;n=this.__s!==this.state?this.__s:this.__s=c({},this.state),"function"==typeof e&&(e=e(n,this.props)),e&&c(n,e),null!=e&&this.__v&&(this.__e=!1,t&&this.__h.push(t),k(this))},d.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),k(this))},d.prototype.render=g,n=[],s="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,i=o,function(e){e.Google="Google",e.GitHub="GitHub",e.Anonymously="Anonymously"}(l||(l={}));var N=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){function t(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}e.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1},getDefaults:t,changeDefaults:function(t){e.exports.defaults=t}}}));N.defaults,N.getDefaults,N.changeDefaults;const T=/[&<>"']/,D=/[&<>"']/g,O=/[<>"']|&(?!#?\w+;)/,E=/[<>"']|&(?!#?\w+;)/g,Z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},U=e=>Z[e];const q=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function I(e){return e.replace(q,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const G=/(^|[^\[])\^/g;const M=/[^\w:]/g,j=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const F={},H=/^[^:]+:\/*[^/]*$/,B=/^([^:]+:)[\s\S]*$/,W=/^([^:]+:\/*[^/]*)[\s\S]*$/;function V(e,t){F[" "+e]||(H.test(e)?F[" "+e]=e+"/":F[" "+e]=X(e,"/",!0));const n=-1===(e=F[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(B,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(W,"$1")+t:e+t}function X(e,t,n){const s=e.length;if(0===s)return"";let r=0;for(;r<s;){const i=e.charAt(s-r-1);if(i!==t||n){if(i===t||!n)break;r++}else r++}return e.substr(0,s-r)}var J={escape:function(e,t){if(t){if(T.test(e))return e.replace(D,U)}else if(O.test(e))return e.replace(E,U);return e},unescape:I,edit:function(e,t){e=e.source||e,t=t||"";const n={replace:(t,s)=>(s=(s=s.source||s).replace(G,"$1"),e=e.replace(t,s),n),getRegex:()=>new RegExp(e,t)};return n},cleanUrl:function(e,t,n){if(e){let e;try{e=decodeURIComponent(I(n)).replace(M,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!j.test(n)&&(n=V(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n},resolveUrl:V,noopTest:{exec:function(){}},merge:function(e){let t,n,s=1;for(;s<arguments.length;s++)for(n in t=arguments[s],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},splitCells:function(e,t){const n=e.replace(/\|/g,(e,t,n)=>{let s=!1,r=t;for(;--r>=0&&"\\"===n[r];)s=!s;return s?"|":" |"}).split(/ \|/);let s=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(/\\\|/g,"|");return n},rtrim:X,findClosingBracket:function(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let s=0,r=0;for(;r<n;r++)if("\\"===e[r])r++;else if(e[r]===t[0])s++;else if(e[r]===t[1]&&(s--,s<0))return r;return-1},checkSanitizeDeprecation:function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}};const{noopTest:K,edit:Q,merge:Y}=J,ee={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:K,table:K,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};ee.def=Q(ee.def).replace("label",ee._label).replace("title",ee._title).getRegex(),ee.bullet=/(?:[*+-]|\d{1,9}\.)/,ee.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,ee.item=Q(ee.item,"gm").replace(/bull/g,ee.bullet).getRegex(),ee.list=Q(ee.list).replace(/bull/g,ee.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ee.def.source+")").getRegex(),ee._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ee._comment=/<!--(?!-?>)[\s\S]*?-->/,ee.html=Q(ee.html,"i").replace("comment",ee._comment).replace("tag",ee._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ee.paragraph=Q(ee._paragraph).replace("hr",ee.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",ee._tag).getRegex(),ee.blockquote=Q(ee.blockquote).replace("paragraph",ee.paragraph).getRegex(),ee.normal=Y({},ee),ee.gfm=Y({},ee.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),ee.pedantic=Y({},ee.normal,{html:Q("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",ee._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:K,paragraph:Q(ee.normal._paragraph).replace("hr",ee.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",ee.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const te={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:K,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:K,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~"};te.em=Q(te.em).replace(/punctuation/g,te._punctuation).getRegex(),te._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,te._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,te._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,te.autolink=Q(te.autolink).replace("scheme",te._scheme).replace("email",te._email).getRegex(),te._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,te.tag=Q(te.tag).replace("comment",ee._comment).replace("attribute",te._attribute).getRegex(),te._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,te._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,te._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,te.link=Q(te.link).replace("label",te._label).replace("href",te._href).replace("title",te._title).getRegex(),te.reflink=Q(te.reflink).replace("label",te._label).getRegex(),te.normal=Y({},te),te.pedantic=Y({},te.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:Q(/^!?\[(label)\]\((.*?)\)/).replace("label",te._label).getRegex(),reflink:Q(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",te._label).getRegex()}),te.gfm=Y({},te.normal,{escape:Q(te.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),te.gfm.url=Q(te.gfm.url,"i").replace("email",te.gfm._extended_email).getRegex(),te.breaks=Y({},te.gfm,{br:Q(te.br).replace("{2,}","*").getRegex(),text:Q(te.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var ne={block:ee,inline:te};const{defaults:se}=N,{block:re}=ne,{rtrim:ie,splitCells:le,escape:oe}=J;var ae=class e{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||se,this.rules=re.normal,this.options.pedantic?this.rules=re.pedantic:this.options.gfm&&(this.rules=re.gfm)}static get rules(){return re}static lex(t,n){return new e(n).lex(t)}lex(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.token(e,!0)}token(e,t){let n,s,r,i,l,o,a,u,c,h,p,f,g,d,_,m;for(e=e.replace(/^ +$/gm,"");e;)if((r=this.rules.newline.exec(e))&&(e=e.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(e)){const t=this.tokens[this.tokens.length-1];e=e.substring(r[0].length),t&&"paragraph"===t.type?t.text+="\n"+r[0].trimRight():(r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?r:ie(r,"\n")}))}else if(r=this.rules.fences.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"code",lang:r[2]?r[2].trim():r[2],text:r[3]||""});else if(r=this.rules.heading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if((r=this.rules.nptable.exec(e))&&(o={type:"table",header:le(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]},o.header.length===o.align.length)){for(e=e.substring(r[0].length),p=0;p<o.align.length;p++)/^ *-+: *$/.test(o.align[p])?o.align[p]="right":/^ *:-+: *$/.test(o.align[p])?o.align[p]="center":/^ *:-+ *$/.test(o.align[p])?o.align[p]="left":o.align[p]=null;for(p=0;p<o.cells.length;p++)o.cells[p]=le(o.cells[p],o.header.length);this.tokens.push(o)}else if(r=this.rules.hr.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,t),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(e)){for(e=e.substring(r[0].length),i=r[2],d=i.length>1,a={type:"list_start",ordered:d,start:d?+i:"",loose:!1},this.tokens.push(a),r=r[0].match(this.rules.item),u=[],n=!1,g=r.length,p=0;p<g;p++)o=r[p],h=o.length,o=o.replace(/^ *([*+-]|\d+\.) */,""),~o.indexOf("\n ")&&(h-=o.length,o=this.options.pedantic?o.replace(/^ {1,4}/gm,""):o.replace(new RegExp("^ {1,"+h+"}","gm"),"")),p!==g-1&&(l=re.bullet.exec(r[p+1])[0],(i.length>1?1===l.length:l.length>1||this.options.smartLists&&l!==i)&&(e=r.slice(p+1).join("\n")+e,p=g-1)),s=n||/\n\n(?!\s*$)/.test(o),p!==g-1&&(n="\n"===o.charAt(o.length-1),s||(s=n)),s&&(a.loose=!0),_=/^\[[ xX]\] /.test(o),m=void 0,_&&(m=" "!==o[1],o=o.replace(/^\[[ xX]\] +/,"")),c={type:"list_item_start",task:_,checked:m,loose:s},u.push(c),this.tokens.push(c),this.token(o,!1),this.tokens.push({type:"list_item_end"});if(a.loose)for(g=u.length,p=0;p<g;p++)u[p].loose=!0;this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(e))e=e.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===r[1]||"script"===r[1]||"style"===r[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):oe(r[0]):r[0]});else if(t&&(r=this.rules.def.exec(e)))e=e.substring(r[0].length),r[3]&&(r[3]=r[3].substring(1,r[3].length-1)),f=r[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[f]||(this.tokens.links[f]={href:r[2],title:r[3]});else if((r=this.rules.table.exec(e))&&(o={type:"table",header:le(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]},o.header.length===o.align.length)){for(e=e.substring(r[0].length),p=0;p<o.align.length;p++)/^ *-+: *$/.test(o.align[p])?o.align[p]="right":/^ *:-+: *$/.test(o.align[p])?o.align[p]="center":/^ *:-+ *$/.test(o.align[p])?o.align[p]="left":o.align[p]=null;for(p=0;p<o.cells.length;p++)o.cells[p]=le(o.cells[p].replace(/^ *\| *| *\| *$/g,""),o.header.length);this.tokens.push(o)}else if(r=this.rules.lheading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2].charAt(0)?1:2,text:r[1]});else if(t&&(r=this.rules.paragraph.exec(e)))e=e.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens}};const{defaults:ue}=N,{cleanUrl:ce,escape:he}=J;var pe=class{constructor(e){this.options=e||ue}code(e,t,n){const s=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,s);null!=t&&t!==e&&(n=!0,e=t)}return s?'<pre><code class="'+this.options.langPrefix+he(s,!0)+'">'+(n?e:he(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:he(e,!0))+"</code></pre>"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,n,s){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+s.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const s=t?"ol":"ul";return"<"+s+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+s+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,n){if(null===(e=ce(this.options.sanitize,this.options.baseUrl,e)))return n;let s='<a href="'+he(e)+'"';return t&&(s+=' title="'+t+'"'),s+=">"+n+"</a>",s}image(e,t,n){if(null===(e=ce(this.options.sanitize,this.options.baseUrl,e)))return n;let s='<img src="'+e+'" alt="'+n+'"';return t&&(s+=' title="'+t+'"'),s+=this.options.xhtml?"/>":">",s}text(e){return e}},fe=class{constructor(){this.seen={}}slug(e){let t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){const e=t;do{this.seen[e]++,t=e+"-"+this.seen[e]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t}};const{defaults:ge}=N,{inline:de}=ne,{findClosingBracket:_e,escape:me}=J;var ke=class e{constructor(e,t){if(this.options=t||ge,this.links=e,this.rules=de.normal,this.options.renderer=this.options.renderer||new pe,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=de.pedantic:this.options.gfm&&(this.options.breaks?this.rules=de.breaks:this.rules=de.gfm)}static get rules(){return de}static output(t,n,s){return new e(n,s).output(t)}output(t){let n,s,r,i,l,o,a="";for(;t;)if(l=this.rules.escape.exec(t))t=t.substring(l[0].length),a+=me(l[1]);else if(l=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(l[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(l[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(l[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(l[0])&&(this.inRawBlock=!1),t=t.substring(l[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):me(l[0]):l[0];else if(l=this.rules.link.exec(t)){const s=_e(l[2],"()");if(s>-1){const e=(0===l[0].indexOf("!")?5:4)+l[1].length+s;l[2]=l[2].substring(0,s),l[0]=l[0].substring(0,e).trim(),l[3]=""}t=t.substring(l[0].length),this.inLink=!0,r=l[2],this.options.pedantic?(n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r),n?(r=n[1],i=n[3]):i=""):i=l[3]?l[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),a+=this.outputLink(l,{href:e.escapes(r),title:e.escapes(i)}),this.inLink=!1}else if((l=this.rules.reflink.exec(t))||(l=this.rules.nolink.exec(t))){if(t=t.substring(l[0].length),n=(l[2]||l[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()],!n||!n.href){a+=l[0].charAt(0),t=l[0].substring(1)+t;continue}this.inLink=!0,a+=this.outputLink(l,n),this.inLink=!1}else if(l=this.rules.strong.exec(t))t=t.substring(l[0].length),a+=this.renderer.strong(this.output(l[4]||l[3]||l[2]||l[1]));else if(l=this.rules.em.exec(t))t=t.substring(l[0].length),a+=this.renderer.em(this.output(l[6]||l[5]||l[4]||l[3]||l[2]||l[1]));else if(l=this.rules.code.exec(t))t=t.substring(l[0].length),a+=this.renderer.codespan(me(l[2].trim(),!0));else if(l=this.rules.br.exec(t))t=t.substring(l[0].length),a+=this.renderer.br();else if(l=this.rules.del.exec(t))t=t.substring(l[0].length),a+=this.renderer.del(this.output(l[1]));else if(l=this.rules.autolink.exec(t))t=t.substring(l[0].length),"@"===l[2]?(s=me(this.mangle(l[1])),r="mailto:"+s):(s=me(l[1]),r=s),a+=this.renderer.link(r,null,s);else if(this.inLink||!(l=this.rules.url.exec(t))){if(l=this.rules.text.exec(t))t=t.substring(l[0].length),this.inRawBlock?a+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):me(l[0]):l[0]):a+=this.renderer.text(me(this.smartypants(l[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else{if("@"===l[2])s=me(l[0]),r="mailto:"+s;else{do{o=l[0],l[0]=this.rules._backpedal.exec(l[0])[0]}while(o!==l[0]);s=me(l[0]),r="www."===l[1]?"http://"+s:s}t=t.substring(l[0].length),a+=this.renderer.link(r,null,s)}return a}static escapes(t){return t?t.replace(e.rules._escapes,"$1"):t}outputLink(e,t){const n=t.href,s=t.title?me(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,s,this.output(e[1])):this.renderer.image(n,s,me(e[1]))}smartypants(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e}mangle(e){if(!this.options.mangle)return e;const t=e.length;let n,s="",r=0;for(;r<t;r++)n=e.charCodeAt(r),Math.random()>.5&&(n="x"+n.toString(16)),s+="&#"+n+";";return s}},be=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}};const{defaults:xe}=N,{merge:ye,unescape:ve}=J;var we=class e{constructor(e){this.tokens=[],this.token=null,this.options=e||xe,this.options.renderer=this.options.renderer||new pe,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new fe}static parse(t,n){return new e(n).parse(t)}parse(e){this.inline=new ke(e.links,this.options),this.inlineText=new ke(e.links,ye({},this.options,{renderer:new be})),this.tokens=e.reverse();let t="";for(;this.next();)t+=this.tok();return t}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let e=this.token.text;for(;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)}tok(){let e="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,ve(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let t,n,s,r,i="";for(s="",t=0;t<this.token.header.length;t++)s+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(i+=this.renderer.tablerow(s),t=0;t<this.token.cells.length;t++){for(n=this.token.cells[t],s="",r=0;r<n.length;r++)s+=this.renderer.tablecell(this.inline.output(n[r]),{header:!1,align:this.token.align[r]});e+=this.renderer.tablerow(s)}return this.renderer.table(i,e)}case"blockquote_start":for(e="";"blockquote_end"!==this.next().type;)e+=this.tok();return this.renderer.blockquote(e);case"list_start":{e="";const t=this.token.ordered,n=this.token.start;for(;"list_end"!==this.next().type;)e+=this.tok();return this.renderer.list(e,t,n)}case"list_item_start":{e="";const t=this.token.loose,n=this.token.checked,s=this.token.task;if(this.token.task)if(t)if("text"===this.peek().type){const e=this.peek();e.text=this.renderer.checkbox(n)+" "+e.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(n)});else e+=this.renderer.checkbox(n);for(;"list_item_end"!==this.next().type;)e+=t||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(e,s,n)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const e='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(e);console.log(e)}}}};const{merge:Se,checkSanitizeDeprecation:$e,escape:Ae}=J,{getDefaults:Ce,changeDefaults:ze,defaults:Le}=N;function Pe(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(n||"function"==typeof t){n||(n=t,t=null),t=Se({},Pe.defaults,t||{}),$e(t);const s=t.highlight;let r,i,l=0;try{r=ae.lex(e,t)}catch(e){return n(e)}i=r.length;const o=function(e){if(e)return t.highlight=s,n(e);let i;try{i=we.parse(r,t)}catch(t){e=t}return t.highlight=s,e?n(e):n(null,i)};if(!s||s.length<3)return o();if(delete t.highlight,!i)return o();for(;l<r.length;l++)!function(e){"code"!==e.type?--i||o():s(e.text,e.lang,(function(t,n){return t?o(t):null==n||n===e.text?--i||o():(e.text=n,e.escaped=!0,void(--i||o()))}))}(r[l])}else try{return t=Se({},Pe.defaults,t||{}),$e(t),we.parse(ae.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||Pe.defaults).silent)return"<p>An error occurred:</p><pre>"+Ae(e.message+"",!0)+"</pre>";throw e}}Pe.options=Pe.setOptions=function(e){return Se(Pe.defaults,e),ze(Pe.defaults),Pe},Pe.getDefaults=Ce,Pe.defaults=Le,Pe.Parser=we,Pe.parser=we.parse,Pe.Renderer=pe,Pe.TextRenderer=be,Pe.Lexer=ae,Pe.lexer=ae.lex,Pe.InlineLexer=ke,Pe.inlineLexer=ke.output,Pe.Slugger=fe,Pe.parse=Pe;var Re=Pe;function Ne(e){return Re(e,{sanitize:!0,gfm:!0,breaks:!0})}const Te={defaultAvatar:"./static/avatar.jpg",blogTitle:""};class De extends d{constructor(t){super(t),this.previewMD=e=>{const t=e.target;this.setState({commentContent:t.value||"",markdownContent:Ne(t.value||"")})},this.handlePreview=()=>{this.setState({isPreview:!this.state.isPreview})},this.handleComment=async t=>{t.preventDefault(),this.state.commentContent&&this.props.logged&&(await function(t,n,s){const r={...n,id:Math.random().toString().substr(2),likes:{},content:s,timestamp:(new Date).getTime().toString()};return e.database().ref(`/${t}/${r.id}/`).set(r)}(Te.blogTitle,this.props.user,this.state.commentContent),this.props.refreshComments())},this.state={isPreview:!1,markdownContent:"",commentContent:""}}async handleLogout(){await e.auth().signOut()}handleLogin(e,t){this.props.handleLogin(e)}render(e,t){const n="预览: "+(t.isPreview?"ON":"OFF");return p("form",{class:"firement-form"},p("div",{class:"firement-form__header"},p("div",{class:"firement-row"},p("img",{src:e.user.avatar,alt:"avatar",class:"firement-avatar"}),p("span",{class:"firement-form__label"}," ",e.user.name," "))),p("div",{class:"firement-form__content"},e.logged?p("div",{className:"firement-box firement-form__comment_input"},this.state.isPreview?p("div",{class:"firement-box firement-form__preview"},p("div",{className:"firement-form__preview_content",dangerouslySetInnerHTML:{__html:t.markdownContent}})):p("textarea",{name:"content",placeholder:"Markdown Supported",class:"firement-form__textarea",value:t.commentContent,onInput:this.previewMD})):p("div",{className:"firement-box firement-form__not_login"},p("label",{class:"firement-form__label"},"请登录后评论"),p("input",{type:"button",class:"firement-button",value:"Google",onClick:this.handleLogin.bind(this,l.Google)}),p("input",{type:"button",class:"firement-button",value:"GitHub",onClick:this.handleLogin.bind(this,l.GitHub)}),p("input",{type:"button",class:"firement-button",value:"Anonymously",onClick:this.handleLogin.bind(this,l.Anonymously)}))),p("div",{className:"firement-row"},p("div",{className:"firement-row__right"},p("input",{type:"button",value:n,class:"firement-button",onClick:this.handlePreview}),p("input",{type:"submit",value:"提交评论",class:"firement-submit firement-button",onClick:this.handleComment}))))}}function Oe(e){const t=e.homePage,n=new Date(+e.timestamp).toISOString(),s=Object.keys(e.likes).filter(t=>e.likes[t]).length;return p("section",{className:"firement-comment firement-form","data-id":e.uid},p("div",{className:"firement-form__header firement-row"},p("div",{className:"firement-row__left"},p("a",{href:t},p("img",{src:e.avatar,alt:"avatar",className:"firement-avatar"})),p("span",{className:"firement-form__label"},e.name),p("span",{className:"firement-form__label firement-comment__time"},"comment at: ",n)),p("div",{className:"firement-row__right"},p("span",{className:"firement-comment__likes"},p("i",{className:"firement-comment__likes_icon",onClick:()=>{const{handleLikes:t,...n}=e;e.handleLikes(n)}}),p("span",{className:"firement-form__label"},s),p("span",{className:"firement-form__label firement-comment__layer"},"# ",e.index)))),p("div",{className:"firement-content",dangerouslySetInnerHTML:{__html:Ne(e.content)}}))}class Ee extends d{render(e){const t=e.comments.map((t,n)=>p(Oe,Object.assign({},t.comment,{uid:t.key,index:e.comments.length-n,handleLikes:e.handleLikes})));(new Date).getTime().toString();return p("div",{className:"firement-comments"},t)}}class Ze extends d{constructor(){super(),this.refreshComments=async()=>{const e=await this.getComments();this.setState({comments:e})},this.handleLogin=async t=>{try{const n=await async function(t=l.Anonymously){let n=null;switch(t){case l.Google:n=new e.auth.GoogleAuthProvider;break;case l.GitHub:n=new e.auth.GithubAuthProvider;break;default:n=null}const s=n?await e.auth().signInWithPopup(n):await e.auth().signInAnonymously(),r=s.additionalUserInfo.profile;return{avatar:s.user.photoURL,email:s.user.email,name:s.user.displayName,uid:s.user.uid,homePage:"GitHub"===t?r.html_url:null}}(t);t===l.Anonymously&&(n.avatar=Te.defaultAvatar,n.name="匿名",n.email=null),this.setState({user:n,logged:!0})}catch(e){alert("登录失败: "+e)}},this.handleLikes=async e=>{try{await R(Te.blogTitle,e.id,this.state.user.uid),await this.refreshComments()}catch(e){alert("评论失败:"+e)}},this.state={comments:[],logged:!1,user:{uid:"",name:"匿名",email:null,avatar:Te.defaultAvatar}}}componentWillMount(){this.refreshComments()}async getComments(){const t=await async function(t){return(await e.database().ref(`/${t}`).once("value")).val()}(Te.blogTitle),n=[];for(const e in t)if(t.hasOwnProperty(e)){const s=t[e];n.push({key:e,comment:{...s,likes:s.likes||{}}})}return n.sort((e,t)=>e.comment.timestamp<t.comment.timestamp?1:-1),n}render(e,t){return p("div",{class:"firement-root"},p(De,{refreshComments:this.refreshComments,user:t.user,logged:t.logged,handleLogin:this.handleLogin}),p(Ee,{comments:this.state.comments,handleLikes:this.handleLikes}))}}return function(n,s){!function(t){e.initializeApp(t)}(n),Te.blogTitle=n.blogTitle,Te.defaultAvatar=n.defaultAvatar,function(e,n,s){var r,l,u;t.__&&t.__(e,n),l=(r=s===i)?null:s&&s.__k||n.__k,e=p(g,null,[e]),u=[],$(n,(r?n:s||n).__k=e,l||o,o,void 0!==n.ownerSVGElement,s&&!r?[s]:l?null:a.slice.call(n.childNodes),u,s||o,r),A(u,e)}(p(Ze,null),s)}}));
//# sourceMappingURL=main.js.map
